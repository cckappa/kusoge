[gd_scene load_steps=52 format=3 uid="uid://dbfk6io7tum1h"]

[ext_resource type="Script" uid="uid://iyxa2juiwepc" path="res://scripts/maps/habitacion_demo_tecnico.gd" id="1_gmx2w"]
[ext_resource type="Script" uid="uid://5rnf247xyu5v" path="res://scripts/scene_creator_tool.gd" id="2_d4xx2"]
[ext_resource type="Script" uid="uid://47r7xyodgbvr" path="res://scripts/parallax_background_layer.gd" id="3_ooqyf"]
[ext_resource type="Script" uid="uid://d4gnu0ogw3rcy" path="res://scripts/background_layer.gd" id="4_8q45v"]
[ext_resource type="Texture2D" uid="uid://dl1jide8tgpi" path="res://assets/backgrounds/demo_tecnico/fondo_habitacion.png" id="5_kwu0w"]
[ext_resource type="Script" uid="uid://bsvp6e76bx107" path="res://scripts/scene_changer.gd" id="6_1j1x1"]
[ext_resource type="PackedScene" uid="uid://cc852y6dvkcdr" path="res://scenes/playable_character.tscn" id="6_rdwgu"]
[ext_resource type="Script" uid="uid://caf516xcaglfd" path="res://scripts/playable_character.gd" id="7_wld6k"]
[ext_resource type="Resource" uid="uid://jr2yuolebha7" path="res://assets/resources/conejitx.tres" id="8_ix8xt"]
[ext_resource type="Script" uid="uid://g7sf10k2338d" path="res://scripts/npc_layer.gd" id="9_vbeqg"]
[ext_resource type="Script" uid="uid://dsfklbei7r5qc" path="res://scripts/object_layer.gd" id="10_1j1x1"]
[ext_resource type="PackedScene" uid="uid://h0q50x2317m1" path="res://scenes/npc.tscn" id="10_vbeqg"]
[ext_resource type="Texture2D" uid="uid://dypnt78d1mjsp" path="res://assets/spritesheets/demo_tecnico/jefe_mapa.png" id="11_1j1x1"]
[ext_resource type="Script" uid="uid://ck4xyxoy5fldl" path="res://scripts/enemies_layer.gd" id="11_vkkwh"]
[ext_resource type="Script" uid="uid://cv43fprb0dski" path="res://scripts/spawns_layer.gd" id="12_q44w6"]
[ext_resource type="Script" uid="uid://c2d2peg3ovb8n" path="res://scripts/saves_layer.gd" id="13_3y6r5"]
[ext_resource type="Texture2D" uid="uid://dgafhxdgdujjc" path="res://assets/spritesheets/demo_tecnico/candelabroder_habitacion.png" id="13_vkkwh"]
[ext_resource type="Texture2D" uid="uid://cjpvk2gmey647" path="res://assets/spritesheets/demo_tecnico/candelabroizq_habitacion.png" id="14_q44w6"]
[ext_resource type="PackedScene" uid="uid://ci5a44r0l16fy" path="res://scenes/pause_menu.tscn" id="14_u5et4"]
[ext_resource type="PackedScene" uid="uid://clmbh4jnxur05" path="res://scenes/objeto.tscn" id="15_3y6r5"]
[ext_resource type="Script" uid="uid://o5vv2g2a4qjo" path="res://scripts/pause_menu.gd" id="15_8vtij"]
[ext_resource type="PackedScene" uid="uid://byctl1vrnbctx" path="res://scenes/settings_menu.tscn" id="16_k74cn"]
[ext_resource type="Texture2D" uid="uid://ckndfgr2gggsp" path="res://assets/objects/demo_tecnico/craneo1_habitacion.png" id="16_u5et4"]
[ext_resource type="Texture2D" uid="uid://bwl6t1hflemcw" path="res://assets/objects/demo_tecnico/craneo2_habitacion.png" id="17_8vtij"]
[ext_resource type="Script" uid="uid://cit4h4wpq0ui5" path="res://scripts/settings_menu.gd" id="17_sky3e"]
[ext_resource type="Texture2D" uid="uid://dxd54x5v7mp36" path="res://assets/objects/demo_tecnico/craneo3_habitacion.png" id="18_k74cn"]
[ext_resource type="PackedScene" uid="uid://bdm55ulfce5x4" path="res://scenes/black_rect.tscn" id="18_x3tux"]
[ext_resource type="PackedScene" uid="uid://da60fhf2hpt08" path="res://scenes/camera_manager.tscn" id="19_c7180"]
[ext_resource type="Script" uid="uid://84ck8i2ypykl" path="res://scripts/camera_manager.gd" id="20_dcmex"]
[ext_resource type="Texture2D" uid="uid://drotdyw73xb3y" path="res://assets/backgrounds/demo_tecnico/craneoslimite_habitacion.png" id="20_vkkwh"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="21_0fy3c"]
[ext_resource type="Script" uid="uid://bhexx6mj1xv3q" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="22_lvqvm"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="23_6urx6"]
[ext_resource type="Script" uid="uid://desx1xrrvf1ew" path="res://scripts/reminder_phantom_camera.gd" id="24_0yv1h"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_phoxl"]
size = Vector2(2479, 344)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_or2tu"]
size = Vector2(1148, 344)

[sub_resource type="AtlasTexture" id="AtlasTexture_sky3e"]
atlas = ExtResource("11_1j1x1")
region = Rect2(0, 0, 400, 400)

[sub_resource type="AtlasTexture" id="AtlasTexture_x3tux"]
atlas = ExtResource("11_1j1x1")
region = Rect2(400, 0, 400, 400)

[sub_resource type="AtlasTexture" id="AtlasTexture_c7180"]
atlas = ExtResource("11_1j1x1")
region = Rect2(0, 400, 400, 400)

[sub_resource type="AtlasTexture" id="AtlasTexture_dcmex"]
atlas = ExtResource("11_1j1x1")
region = Rect2(400, 400, 400, 400)

[sub_resource type="SpriteFrames" id="SpriteFrames_0fy3c"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_sky3e")
}, {
"duration": 1.71,
"texture": SubResource("AtlasTexture_x3tux")
}, {
"duration": 0.61,
"texture": SubResource("AtlasTexture_c7180")
}, {
"duration": 1.91,
"texture": SubResource("AtlasTexture_dcmex")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_lvqvm"]
atlas = ExtResource("13_vkkwh")
region = Rect2(0, 0, 411, 715)

[sub_resource type="AtlasTexture" id="AtlasTexture_6urx6"]
atlas = ExtResource("13_vkkwh")
region = Rect2(411, 0, 411, 715)

[sub_resource type="AtlasTexture" id="AtlasTexture_0yv1h"]
atlas = ExtResource("13_vkkwh")
region = Rect2(822, 0, 411, 715)

[sub_resource type="SpriteFrames" id="SpriteFrames_phoxl"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lvqvm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6urx6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0yv1h")
}],
"loop": true,
"name": &"default",
"speed": 1.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_or2tu"]
atlas = ExtResource("14_q44w6")
region = Rect2(0, 0, 411, 715)

[sub_resource type="AtlasTexture" id="AtlasTexture_p0sfp"]
atlas = ExtResource("14_q44w6")
region = Rect2(411, 0, 411, 715)

[sub_resource type="AtlasTexture" id="AtlasTexture_ajej5"]
atlas = ExtResource("14_q44w6")
region = Rect2(822, 0, 411, 715)

[sub_resource type="SpriteFrames" id="SpriteFrames_sebpp"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_or2tu")
}, {
"duration": 1.61,
"texture": SubResource("AtlasTexture_p0sfp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ajej5")
}],
"loop": true,
"name": &"default",
"speed": 1.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1j1x1"]
size = Vector2(3896, 1867)

[sub_resource type="Resource" id="Resource_fyrvt"]
script = ExtResource("23_6urx6")
duration = 2.0
transition = 1
ease = 2

[node name="HabitacionDemoTecnico" type="Node2D" node_paths=PackedStringArray("black_rect", "audio_stream_player")]
y_sort_enabled = true
script = ExtResource("1_gmx2w")
black_rect = NodePath("CanvasLayer/BlackRect")
audio_stream_player = NodePath("AudioStreamPlayer")

[node name="SceneCreatorTool" type="Node" parent="."]
script = ExtResource("2_d4xx2")
metadata/_custom_type_script = "uid://5rnf247xyu5v"

[node name="ParallaxBackgroundLayer" type="Node2D" parent="."]
z_index = -1
script = ExtResource("3_ooqyf")

[node name="BackgroundLayer" type="Node2D" parent="."]
z_index = -1
script = ExtResource("4_8q45v")

[node name="FondoHabitacion" type="Sprite2D" parent="BackgroundLayer"]
texture = ExtResource("5_kwu0w")

[node name="StaticBody2D" type="StaticBody2D" parent="BackgroundLayer"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="BackgroundLayer/StaticBody2D"]
position = Vector2(-14.5, 988)
shape = SubResource("RectangleShape2D_phoxl")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="BackgroundLayer/StaticBody2D"]
position = Vector2(-10, -31)
shape = SubResource("RectangleShape2D_or2tu")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="BackgroundLayer/StaticBody2D"]
polygon = PackedVector2Array(-1037, 865, -862, 617, -784, 257, -688, 181, -650, 276, -596, 254, -447, 99, -499, -274, -1056, -156, -1180, 368, -1155, 794)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="BackgroundLayer/StaticBody2D"]
polygon = PackedVector2Array(404, 56, 574, 243, 833, 584, 1055, 889, 1394, 679, 1246, -224, 529, -399, 270, -290)

[node name="SceneChanger" type="Area2D" parent="BackgroundLayer" node_paths=PackedStringArray("black_rect")]
script = ExtResource("6_1j1x1")
target_scene = "res://scenes/maps/pasillo_demo_tecnico.tscn"
target_marker = "PasilloSalidaDerecha"
black_rect = NodePath("../../CanvasLayer/BlackRect")
metadata/_custom_type_script = "uid://bsvp6e76bx107"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="BackgroundLayer/SceneChanger"]
polygon = PackedVector2Array(-883, 502, -823, 496, -644, 261, -663, 154, -811, 182)

[node name="PlayableCharacter" type="CharacterBody2D" parent="." groups=["main_character"] instance=ExtResource("6_rdwgu")]
y_sort_enabled = true
script = ExtResource("7_wld6k")
character_info = ExtResource("8_ix8xt")

[node name="NpcLayer" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("9_vbeqg")

[node name="Jefe" parent="NpcLayer" groups=["npcs"] instance=ExtResource("10_vbeqg")]
position = Vector2(0, 145)

[node name="AnimatedSprite2D" parent="NpcLayer/Jefe" index="0"]
sprite_frames = SubResource("SpriteFrames_0fy3c")
autoplay = "default"
frame_progress = 0.802385
offset = Vector2(0, -135.38)

[node name="CollisionPolygon2D" parent="NpcLayer/Jefe/StaticBody2D" index="0"]
polygon = PackedVector2Array(-102, 57, -11, 68, 89, 60, 111, 15, 49, -32, -43, -37, -110, 11)

[node name="ObjectLayer" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("10_1j1x1")

[node name="CandelabroDer" parent="ObjectLayer" groups=["npcs"] instance=ExtResource("10_vbeqg")]
position = Vector2(295, 158)

[node name="AnimatedSprite2D" parent="ObjectLayer/CandelabroDer" index="0"]
sprite_frames = SubResource("SpriteFrames_phoxl")
autoplay = "default"
frame_progress = 0.116658
offset = Vector2(0, -314)

[node name="CollisionPolygon2D" parent="ObjectLayer/CandelabroDer/StaticBody2D" index="0"]
polygon = PackedVector2Array(-93, 20, -42, 41, 58, 36, 59, 10, 17, -17, -41, -14)

[node name="CandelabroIzq" parent="ObjectLayer" groups=["npcs"] instance=ExtResource("10_vbeqg")]
position = Vector2(-288, 159)

[node name="AnimatedSprite2D" parent="ObjectLayer/CandelabroIzq" index="0"]
sprite_frames = SubResource("SpriteFrames_sebpp")
autoplay = "default"
frame_progress = 0.850946
offset = Vector2(0, -314)

[node name="CollisionPolygon2D" parent="ObjectLayer/CandelabroIzq/StaticBody2D" index="0"]
polygon = PackedVector2Array(-67, 37, 4, 39, 91, 23, 60, -5, 29, -11, -33, 0)

[node name="Craneo1" parent="ObjectLayer" groups=["objects"] instance=ExtResource("15_3y6r5")]
position = Vector2(218, 510)

[node name="Sprite2D" parent="ObjectLayer/Craneo1" index="0"]
texture = ExtResource("16_u5et4")
offset = Vector2(0, -20.125)

[node name="CollisionPolygon2D" parent="ObjectLayer/Craneo1/StaticBody2D" index="1"]
polygon = PackedVector2Array(-52, 12, -15, 37, 36, 30, 56, -6, 46, -17, -35, -13)

[node name="Craneo2" parent="ObjectLayer" groups=["objects"] instance=ExtResource("15_3y6r5")]
position = Vector2(472, 165)

[node name="Sprite2D" parent="ObjectLayer/Craneo2" index="0"]
texture = ExtResource("17_8vtij")
offset = Vector2(0, -19)

[node name="CollisionPolygon2D" parent="ObjectLayer/Craneo2/StaticBody2D" index="1"]
polygon = PackedVector2Array(-52, 7, 28, 28, 55, 8, 38, -9, -40, -10)

[node name="Craneo3" parent="ObjectLayer" groups=["objects"] instance=ExtResource("15_3y6r5")]
position = Vector2(-473, 153)

[node name="Sprite2D" parent="ObjectLayer/Craneo3" index="0"]
texture = ExtResource("18_k74cn")
offset = Vector2(0, -22)

[node name="CollisionPolygon2D" parent="ObjectLayer/Craneo3/StaticBody2D" index="1"]
polygon = PackedVector2Array(-62, 4, -29, 26, 27, 34, 63, 12, 56, -13, -8, -17)

[node name="LimiteCraneos" parent="ObjectLayer" groups=["objects"] instance=ExtResource("15_3y6r5")]
position = Vector2(0, 825)

[node name="Sprite2D" parent="ObjectLayer/LimiteCraneos" index="0"]
texture = ExtResource("20_vkkwh")
offset = Vector2(0, -179)

[node name="CollisionPolygon2D" parent="ObjectLayer/LimiteCraneos/StaticBody2D" index="1"]
polygon = PackedVector2Array(-1020, 0, 1023, -4, 1019, -261, 941, -178, 706, -59, 461, -18, 286, -34, 91, -50, -145, -34, -348, -31, -587, -93, -733, -84, -848, -71, -1014, -139)

[node name="EnemiesLayer" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("11_vkkwh")

[node name="SpawnsLayer" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("12_q44w6")

[node name="DefaultMarker" type="Marker2D" parent="SpawnsLayer"]
position = Vector2(-407, 433)

[node name="EntradaHabitacion" type="Marker2D" parent="SpawnsLayer"]
position = Vector2(-618, 443)

[node name="SavesLayer" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("13_3y6r5")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PauseMenu" type="Control" parent="CanvasLayer" instance=ExtResource("14_u5et4")]
process_mode = 3
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("15_8vtij")

[node name="SettingsMenu" type="Control" parent="CanvasLayer" node_paths=PackedStringArray("game_button", "accesibility_button", "audio_button", "controls_button", "video_button", "game_panel", "accesibility_panel", "audio_panel", "controls_panel", "video_panel", "close_button") instance=ExtResource("16_k74cn")]
process_mode = 3
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("17_sky3e")
game_button = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/TopMenu/Game")
accesibility_button = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/TopMenu/Accesibility")
audio_button = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/TopMenu/Audio")
controls_button = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/TopMenu/Controls")
video_button = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/TopMenu/Video")
game_panel = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/GamePanel")
accesibility_panel = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/AccesibilityPanel")
audio_panel = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/AudioPanel")
controls_panel = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/ControlsPanel")
video_panel = NodePath("PanelContainer/MarginContainer/VBoxContainer/PanelSections/VideoPanel")
close_button = NodePath("PanelContainer/MarginContainer/VBoxContainer/BottomButtons/ClosePause")

[node name="BlackRect" type="ColorRect" parent="CanvasLayer" instance=ExtResource("18_x3tux")]
visible = false
modulate = Color(0, 0, 0, 1)
top_level = true
z_index = 3
y_sort_enabled = true
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0, 0, 0, 1)

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]

[node name="CameraManager" parent="." node_paths=PackedStringArray("phantom_cameras", "current_camera") instance=ExtResource("19_c7180")]
script = ExtResource("20_dcmex")
phantom_cameras = [NodePath("PhantomCameras/PhantomCamera2D")]
current_camera = NodePath("PhantomCameras/PhantomCamera2D")

[node name="Camera2D" parent="CameraManager" index="0"]
physics_interpolation_mode = 1
zoom = Vector2(1.2, 1.2)
process_callback = 0
limit_left = -2356
limit_top = -2839
limit_right = 2365
limit_bottom = 1787
editor_draw_limits = true

[node name="PhantomCameraHost" parent="CameraManager/Camera2D" index="0"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("21_0fy3c")

[node name="CameraCollision" parent="CameraManager/AreasLimits/CameraLimit" index="0"]
position = Vector2(0, -1.5)
shape = SubResource("RectangleShape2D_1j1x1")
disabled = true
metadata/_edit_lock_ = true

[node name="PhantomCamera2D" parent="CameraManager/PhantomCameras" index="0" node_paths=PackedStringArray("follow_target")]
top_level = true
script = ExtResource("22_lvqvm")
priority = 1
follow_mode = 5
follow_target = NodePath("../../../PlayableCharacter")
zoom = Vector2(1.2, 1.2)
tween_resource = SubResource("Resource_fyrvt")
tween_on_load = false
follow_damping = true
follow_damping_value = Vector2(0.25, 0.25)
draw_limits = true
limit_target = NodePath("../../AreasLimits/CameraLimit/CameraCollision")

[node name="ReminderPhantomCamera" parent="CameraManager/PhantomCameras" index="1"]
script = ExtResource("24_0yv1h")

[editable path="NpcLayer/Jefe"]
[editable path="ObjectLayer/CandelabroDer"]
[editable path="ObjectLayer/CandelabroIzq"]
[editable path="ObjectLayer/Craneo1"]
[editable path="ObjectLayer/Craneo2"]
[editable path="ObjectLayer/Craneo3"]
[editable path="ObjectLayer/LimiteCraneos"]
[editable path="CameraManager"]
